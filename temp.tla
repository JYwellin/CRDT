----------------------------- MODULE StateAWSet -----------------------------
CONSTANTS
    Data      \* 所有可能数据的集合
----------------------------------------------------------------------------- 
VARIABLES
    aset,     \* aSet[r]: 副本节点r维护的活跃元素集
    tset      \* tSet[r]: 副本节点r维护的tombstone元素集
----------------------------------------------------------------------------- 
Element == [d: Data, r: Replica, k: Nat]    \* 所有可能元素的集合
----------------------------------------------------------------------------- 
Network == INSTANCE BasicNetwork            \* 实例化一个基础网络的通信环境
-----------------------------------------------------------------------------    
TypeOK == 
    /\ aset \in [Replica -> SUBSET Element]
    /\ tset \in [Replica -> SUBSET Element]
    /\ IntTypeOK
-----------------------------------------------------------------------------
Init == ... \* 初始状态
-----------------------------------------------------------------------------                      
Send(r) == ...      \* 发送消息动作 
Receive(r) == ...   \* 接收消息动作
-----------------------------------------------------------------------------
Do(r) == ...      
-----------------------------------------------------------------------------
Next == 
    \E r \in Replica: 
        Receive(r) \/ Send(r) \/ Update(r)

Spec == Init /\ [][Next]_vars
-----------------------------------------------------------------------------
Read(r) == {ins.d: ins \in aset[r]}

(* SEC: Strong Eventual Consistency *)
SEC == \A r1, r2 \in Replica :
        Sameupdate(r1, r2) => Read(r1) = Read(r2)
=============================================================================
